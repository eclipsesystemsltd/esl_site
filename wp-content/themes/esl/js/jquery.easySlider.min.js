/*
* 	Easy Slider 1.8.2 - jQuery plugin
*	Originally written by Alen Grakalic	
*	http://cssglobe.com/post/4004/easy-slider-15-the-easiest-jquery-plugin-for-sliding
*
*	Copyright (c) 2009 Alen Grakalic (http://cssglobe.com)
*	Copyright (c) 2011 Solutions Nitriques (http://www.nitriques.com/open-source/)
*	Dual licensed under the MIT (MIT-LICENSE.txt)
*	and GPL (GPL-LICENSE.txt) licenses.
*
*	Built for jQuery library
*	http://jquery.com
*
*   Modified by Solutions Nitriques from
*   http://cssglobe.com/post/5780/easy-slider-17-numeric-navigation-jquery-slider
*   - added the autoSizeContainer property
*   - added the possibility to specify a function as the items number
*   - added a return value for the beforeChange callback that can cancel the event
*   - added a speedConstant option
*   - added an offset
*   - added a start option
*   - added a margin between items
*   - added beforeChange and afterChange listener options
*   - added li as the only valid node
*   - added a safeDivide function, to prevent divide by 0
*   - added a queue parameter
*   - added a afterInit and beforeInit listener
*   - added a nextPrevShow properties
*   - added support for numeric and next-prev at the same time
*   - added support for easing equations
*   - added a condition before starting the timeout : more than 1 elem
*   - added public commands for start and stop functions
*   - refactoring how the timer works
*   - added an array for storing data related to each instance
*/

/*
*	markup example for $("#slider").easySlider();
*	
* 	<div id="slider">
*		<ul>
*			<li><img src="images/01.jpg" alt="" /></li>
*			<li><img src="images/02.jpg" alt="" /></li>
*			<li><img src="images/03.jpg" alt="" /></li>
*			<li><img src="images/04.jpg" alt="" /></li>
*			<li><img src="images/05.jpg" alt="" /></li>
*		</ul>
*	</div>
*
*/
(function(e){var b=new Date().getTime(),a="easySlider",d=[];e.easySlider={defaults:{prevId:"prevBtn",prevText:"Previous",nextId:"nextBtn",nextText:"Next",controlsShow:true,controlsBefore:"",controlsAfter:"",controlsFade:true,firstId:"firstBtn",firstText:"First",firstShow:false,lastId:"lastBtn",lastText:"Last",lastShow:false,vertical:false,speed:800,speedConstant:false,auto:false,pause:2000,continuous:false,numeric:false,numericId:"controls",offsetWidth:0,offsetHeight:0,autoSizeContainer:true,start:0,items:1,itemsMargin:0,beforeChange:null,afterChange:null,afterInit:null,nextPrevShow:true,queue:false,easing:e.easing.def}};e.fn.easySlider=function(h){if(typeof h=="string"){}else{h=e.extend({},e.easySlider.defaults,h)}function j(m,l){if(m&&l){return m/l}return 0}function g(l){if(e.isFunction(e.isNaN)){return e.isNaN(l)}else{if(e.isFunction(e.isNumeric)){return e.isNumeric(l)}}return window.isNaN(l)}function f(m,l){return e(">ul>li",m).width()+2*l}function i(l){if(e.isFunction(l.items)){return l.items()}return l.items}function k(l,m){return m.continuous?l-1:l-i(m)}if(!this.length){return this}return this.each(function(){var v=e(this),y=e(">ul>li",v).length,r=f(v,h.itemsMargin),m=h.offsetWidth,l=h.offsetHeight,F=v.height(),E=i(h)<1?1:i(h),A=false,x=0,z=v.data(a);if(z){var D=h;h=d[z].options;x=d[z].t;y=d[z].s;r=f(v,h.itemsMargin);switch(D){case"start":G();break;case"stop":q();break;case"next":n("next",false);break;case"prev":n("prev",false);break;default:if(!g(D)){var H=parseInt(D,10);if(x!=H){x=H;n(x,false)}break}if(console){console.log(a+": command unknow")}break}return}z=(b++).toString();v.data(a,z);d[z]={timer:b,options:h,t:x,s:y};if(h.autoSizeContainer){if(h.vertical){v.width(r+m)}else{v.width((r*E)+m)}if(h.vertical){v.height((F*E)+l)}else{v.height(F+l)}}v.css("overflow","hidden");e(">ul",v).width(h.vertical?r+m:(y*r)+m).height(h.vertical?(y*F)+l:F+l);e(">ul",v).css("margin-left",j(m,2));e(">ul>li",v).width(r).height(F);if(h.continuous){e(">ul",v).prepend(e(">ul>li:last-child",v).clone().css("margin-left","-"+r+"px"));for(c=0;c<E;c+=1){var C=">ul>li:nth-child("+(c+2)+")";e(">ul",v).append(e(C,v).clone())}e(">ul",v).css("width",(y+E)*r)}if(!h.vertical){e(">ul>li",v).css("float","left")}if(h.controlsShow){var u=h.controlsBefore;if(h.numeric){u+='<ol id="'+h.numericId+'"></ol>'}if(h.nextPrevShow){if(h.firstShow){u+='<span id="'+h.firstId+'"><a href="javascript:void(0);">'+h.firstText+"</a></span>"}u+=' <span id="'+h.prevId+'"><a href="javascript:void(0);">'+h.prevText+"</a></span>";u+=' <span id="'+h.nextId+'"><a href="javascript:void(0);">'+h.nextText+"</a></span>";if(h.lastShow){u+=' <span id="'+h.lastId+'"><a href="javascript:void(0);">'+h.lastText+"</a></span>"}}u+=h.controlsAfter;e(v).after(u);if(h.numeric){for(var E=0;E<y;E++){e(document.createElement("li")).attr("id",h.numericId+(E+1)).html("<a rel="+E+' href="javascript:void(0);">'+(E+1)+"</a>").appendTo(e("#"+h.numericId)).click(function(){n(parseInt(e("a",this).attr("rel")),true)})}}if(h.nextPrevShow){e("#"+h.nextId).click(function(){n("next",true)});e("#"+h.prevId).click(function(){n("prev",true)})}if(h.lastShow){e("#"+h.firstId).click(function(){n("first",true)})}if(h.firstShow){e("#"+h.lastId).click(function(){n("last",true)})}}function o(s){s=parseInt(s)+1;e("#"+h.numericId).removeClass("current");e("#"+h.numericId+s).addClass("current")}function B(){x=d[z]?d[z].t:x;y=d[z]?d[z].s:y;ts=k(y,h);if(x>ts){x=0}if(x<0){x=ts}d[z].t=x;if(!h.vertical){e(">ul",v).css("margin-left",(x*r*-1)+j(m,2))}else{e(">ul",v).css("margin-left",(x*F*-1))}if(!h.continuous&&h.controlsFade){if(x==ts){e("#"+h.nextId).hide();e("#"+h.lastId).hide()}else{e("#"+h.nextId).show();e("#"+h.lastId).show()}if(x==0){e("#"+h.prevId).hide();e("#"+h.firstId).hide()}else{e("#"+h.prevId).show();e("#"+h.firstId).show()}}if(h.numeric){o(x)}A=true}function n(t,w){if(A||!w){A=false;x=d[z]?d[z].t:x;y=d[z]?d[z].s:y;h=d[z]?d[z].options:h;ts=k(y,h);var J=x;switch(t){case"next":x=(J>=ts)?(h.continuous?x+1:ts):x+1;break;case"prev":x=(x<=0)?(h.continuous?x-1:0):x-1;break;case"first":x=0;break;case"last":x=ts;break;default:x=t;break}var s=true;if(e.isFunction(h.beforeChange)){s=h.beforeChange(x,J,y,v)}if(s){d[z].t=x;e(">li","#"+h.numericId).removeClass("current");var L=Math.abs(J-x),K=h.speedConstant?h.speed:L*h.speed,I=null;if(!h.vertical){p=(x*r*-1);I={marginLeft:p+j(m,2)}}else{p=(x*F*-1);I={marginTop:p}}e(">ul",v).stop(true,true).animate(I,{queue:h.queue,duration:K,complete:B,easing:h.easing});if(w){q()}else{if(h.auto&&t=="next"&&d[z].timer){G(L*h.speed)}}if(e.isFunction(h.afterChange)){h.afterChange(x,J,y,v)}}}}function G(s){if(g(s)){s=0}q();if(h.auto&&y>1){d[z].timer=setTimeout(function(){n("next",false)},h.pause+s)}}function q(){clearTimeout(d[z].timer);d[z].timer=null}if(h.numeric){o(x)}if(!h.continuous&&h.controlsFade){e("#"+h.prevId).hide();e("#"+h.firstId).hide()}if(e.isFunction(h.afterInit)){h.afterInit(y,v)}if(h.start){n(h.start,false);G()}else{if(e.isFunction(h.beforeChange)){h.beforeChange(0,0,y,v)}G();if(e.isFunction(h.afterChange)){h.afterChange(0,0,y,v)}}A=true})}})(jQuery);